<!DOCTYPE html>
<html>

<head>
    <title><%- htmlWebpackPlugin.options.title %></title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
</head>

<body>
    <p id="amplitudeid"></p>

    <div class="main" id="main">
        <canvas id="canvas1"></canvas>
    </div>

    <div>
        <input type="text" id="myInput">
        <button onclick="myFunction()">Submit</button>
    </div>

    <script defer>
        const tempResponse = {
            "username": "waterkattv",
            "nickname": "",
            "permissions": ["chatter", "streamer"],
            "type": "command",
            "message": "!frank say hello ó €€",
            "emotes": [],
            "follow": {},
            "sub": {
                "length": 0
            },
            "gift": {
                "sender": "", "count": 1,
                "isInitial": false,
                "isGifted": false,
                "isBulk": false
            },
            "raid": {
                "count": 0
            },
            "cheer": {
                "amount": 0
            },
            "chat": {},
            "command": {
                "identifier": "!",
                "group": "frank",
                "request": "say",
                "args": " hello ",
                "isValid": true
            },
            "emote": []
        }

        function myFunction() {
            var inputText = document.getElementById("myInput").value;
            const localObj = {
                detail : {
                    ...tempResponse,
                    command: {
                        ...tempResponse.command,
                        args: `${inputText}`,
                    },
                    message: `!frank say ${inputText}`,
                }
            }
            var customEvent = new CustomEvent('onAonyxEventReceived', localObj);

            window.dispatchEvent(customEvent);
        }
    </script>
</body>

</html>
